<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Listen to {{ genre }} — Music Genre-ator</title>
  <meta name="description" content="{{ description }}">
  <meta name="author" content="Alex Torrance http://www.alextorrance.co.uk">

  <link rel="stylesheet" href="/styles/styles.css">
  <link rel="stylesheet" href="https://use.typekit.net/bwe1rlc.css">

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Favicons -->
  {% set favicon_num = [1, 2, 3, 4, 5, 6, 7, 8] | random %}
  <link rel="icon" type="image/x-icon" href="/images/favicon-{{ favicon_num }}.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-{{ favicon_num }}-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-{{ favicon_num }}-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-{{ favicon_num }}-180x180.png">

  <script src="/scripts/main.js" defer></script>
  <script src="/scripts/deezer-player.js" defer></script>

  {% if umami_url and umami_website_id %}
  <script async src="{{ umami_url }}/script.js" data-website-id="{{ umami_website_id }}"></script>
  {% endif %}

  <meta property="og:title" content="Listen to {{ genre }} — Music Genre-ator">
  <meta property="og:type" content="website">
  <meta property="og:description" content="{{ description }}">
  <meta property="og:image" content="{{ social_media_card }}">
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:creator" content="@alex_tea" />
</head>

<body class="gradient-{{ [1, 2, 3, 4, 5, 6, 7, 8] | random }}">
  <h1>Music Genre-ator</h1>

  <div class="genre">{{ genre }}</div>

  <div class="music-section">
    {% if music_data and music_data.hasResults %}
      <h2>Top tracks for this genre</h2>

      <div class="track-list">
        <ul>
          {% for track in music_data.tracks %}
          <li class="track-item">
            <button class="play-button"
                    data-artist="{{ track.artist }}"
                    data-track="{{ track.name }}"
                    aria-label="Play {{ track.name }} by {{ track.artist }}"
                    type="button">
              <span class="play-icon play-icon--play" aria-hidden="true"></span>
            </button>
            <div class="track-info">
              <div class="track-name"><a href="{{ track.url }}" target="_blank">{{ track.name }}</a></div>
              <div class="track-artist"><a href="{{ track.artist.url }}" target="_blank">{{ track.artist }}</a></div>
            </div>
            <div class="track-stats">
              <span class="track-listeners">{{ track.listeners | formatNumber }} listeners</span>
            </div>
          </li>
          {% endfor %}
        </ul>
      </div>

    {% else %}
      <h2>No tracks found</h2>
      <p>We couldn't find any tracks for this genre on Last.fm, but you can still search for it:</p>

      <div class="music-platforms">
        <a href="{{ music_data.spotifyUrl }}" target="_blank" rel="noopener" class="music-platform-button spotify">
          Search on Spotify
        </a>
        <a href="{{ music_data.appleMusicUrl }}" target="_blank" rel="noopener" class="music-platform-button apple-music">
          Search on Apple Music
        </a>
      </div>
    {% endif %}
  </div>

  <div class="actions">
    <ul>
      <li><a href="/">Generate another</a></li>
      <li><a href="/listen/{{ slug }}" class="active">Listen to this genre</a></li>
      <li><a href="/{{ slug }}" id="js-open-share">Share this genre</a></li>
      <li><a href="{{ bluesky_share_link }}" target="_blank">Post on Bluesky</a></li>
    </ul>

    <div class="share-pane">
      <div class="share-content">
        <textarea name="share-content" readonly>{{ share_content }}</textarea>

        <div class="share-actions">
          <button class="button" id="js-copy">Copy text</button>
          <button class="button" id="js-cancel-share">Cancel</button>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
